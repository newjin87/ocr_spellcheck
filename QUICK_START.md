# 🎯 빠른 시작 가이드 (Quick Start)

## 📌 3줄 요약

1. **PDF 업로드** → OCR로 텍스트 추출
2. **원본 글 편집 후 저장** → "🚀 글 고쳐쓰기 시작" 클릭
3. **모달 팝업에서 맞춤법 → 글쓰기 순차 진행** → 결과 다운로드

---

## 🚀 실행 방법

```bash
# 터미널에서
cd /Users/sungjinyoo/Library/CloudStorage/OneDrive-개인/1.personnel/50.coding/check_spell
source .venv/bin/activate
streamlit run main_app.py
```

---

## 📱 UI 화면 구조

### 화면 1️⃣: 초기 화면 (PDF 업로드 & 원본 편집)

```
🧾 AI OCR + 맞춤법 교정기

📤 PDF 파일 업로드: [파일 선택]
📘 PDF 업로드 완료
✅ OCR 완료

📜 원본 글 (OCR 결과를 수정 후 저장)
┌─────────────────────────────────────────┐
│ [텍스트 편집 영역 - 350 라인 높이]       │
│ OCR 결과를 여기서 수정 가능              │
└─────────────────────────────────────────┘

[✅ 원본 저장]

───────────────────────────────────────────

        [🚀 글 고쳐쓰기 시작]
        ↑
        이 버튼 클릭!
```

### 화면 2️⃣: 모달 팝업 (워크플로우 진행)

```
╔════════════════════════════════════════════╗
║ 🚀 글 고쳐쓰기 워크플로우  [X 닫기]          ║
╠════════════════════════════════════════════╣
║                                            ║
║ [🔍 맞춤법 교정] [✍️ 글쓰기 교정]           ║
║                                            ║
╠════════════════════════════════════════════╣
║ 🔍 맞춤법 교정                              ║
║                                            ║
║ 🟢 오류 없음                               ║
║ (또는)                                     ║
║ 🔴 발견된 맞춤법 오류:                      ║
║ ├─ 문장 1: "원문"                         ║
║ │  수정 제안: 단어1 → 수정1                ║
║ ├─ 문장 2: "원문"                         ║
║ │  수정 제안: 단어2 → 수정2                ║
║ └─ ...                                    ║
║                                            ║
║ ✍️ 맞춤법 교정 후 글 편집                   ║
║ ┌──────────────────────────────────────┐  ║
║ │ [편집 가능 텍스트 영역 - 250 라인]    │  ║
║ └──────────────────────────────────────┘  ║
║                                            ║
║  [💾 저장] [🔎 다시 검사] [➡️ 다음]      ║
║                                            ║
║ 단계: 1️⃣ / 2️⃣                             ║
╚════════════════════════════════════════════╝
```

### 화면 3️⃣: 모달 팝업 - 글쓰기 교정

```
╔════════════════════════════════════════════╗
║ 🚀 글 고쳐쓰기 워크플로우  [X 닫기]          ║
╠════════════════════════════════════════════╣
║ [🔍 맞춤법 교정] [✍️ 글쓰기 교정]           ║
║                                            ║
╠════════════════════════════════════════════╣
║ ✍️ 글쓰기 교정                              ║
║                                            ║
║ 📝 교사 평가 및 고쳐쓰기 제안               ║
║ ┌──────────────────────────────────────┐  ║
║ │ [읽기 전용 평가 텍스트]                │  ║
║ │ - 주장의 명확성: ⭐⭐⭐⭐               │  ║
║ │ - 근거의 타당성: ⭐⭐⭐                │  ║
║ │ - 논리적 흐름: ⭐⭐⭐⭐⭐              │  ║
║ │ - 독자 표현: ⭐⭐⭐⭐                │  ║
║ │ - 맞춤법 정확성: ⭐⭐⭐⭐⭐            │  ║
║ │                                      │  ║
║ │ 개선 제안:                             │  ║
║ │ 글을 더 명확하게...                    │  ║
║ │ 근거를 다양하게...                     │  ║
║ └──────────────────────────────────────┘  ║
║                                            ║
║ ✍️ 글쓰기 교정 후 글 편집                   ║
║ ┌──────────────────────────────────────┐  ║
║ │ [편집 가능 텍스트 영역 - 200 라인]    │  ║
║ └──────────────────────────────────────┘  ║
║                                            ║
║  [💾 저장] [🔎 다시 평가] [✅ 완성!]     ║
║                                            ║
║ 단계: 2️⃣ / 2️⃣                             ║
╚════════════════════════════════════════════╝
```

### 화면 4️⃣: 최종 비교 화면 (메인 화면)

```
───────────────────────────────────────────

📊 최종 결과 비교

┌─ 📄 원본 글 ─────┬─ ✨ 완성된 글 ────┐
│                 │                  │
│ [읽기 전용]      │ [읽기 전용]       │
│ (원본 글 내용)  │ (수정된 글)      │
│                 │                  │
│ (300 라인)      │ (300 라인)       │
│                 │                  │
└─────────────────┴──────────────────┘

───────────────────────────────────────────

[📥 원본 다운로드] [📥 완성본 다운로드] [🔄 처음으로]
                           ↑
                    이 버튼으로 초기화!
```

---

## 🎮 각 버튼의 역할

### 초기 화면

| 버튼 | 역할 | 결과 |
|------|------|------|
| **✅ 원본 저장** | 편집한 원본 글 저장 | 다음 단계로 진행 가능 |
| **🚀 글 고쳐쓰기 시작** | 모달 팝업 열기 | 팝업 내에서 작업 시작 |

### 모달 - 맞춤법 교정 탭

| 버튼 | 역할 | 결과 |
|------|------|------|
| **💾 저장** | 현재 텍스트 저장 | 진행 상황 보존 |
| **🔎 다시 검사** | 편집된 텍스트 재분석 | 오류 목록 업데이트 |
| **➡️ 다음** | 글쓰기 교정 탭으로 이동 | TAB 2 활성화 |

### 모달 - 글쓰기 교정 탭

| 버튼 | 역할 | 결과 |
|------|------|------|
| **💾 저장** | 현재 텍스트 저장 | 진행 상황 보존 |
| **🔎 다시 평가** | 편집된 텍스트 재분석 | 피드백 업데이트 |
| **✅ 완성!** | 최종 완료 | 모달 닫고 결과 표시 |

### 최종 비교 화면

| 버튼 | 역할 | 결과 |
|------|------|------|
| **📥 원본 다운로드** | 원본 글 다운로드 | `original.txt` 저장 |
| **📥 완성본 다운로드** | 최종 글 다운로드 | `completed.txt` 저장 |
| **🔄 처음으로** | 전체 초기화 | 첫 화면으로 복귀 |

---

## 💾 저장되는 파일

```
다운로드 폴더/
├── original.txt          # 원본 글
└── completed.txt         # 최종 교정된 글
```

---

## 📊 상태 변수 (개발자용)

### 핵심 변수

```python
# 원본 및 최종 데이터
st.session_state['original_text']         # 사용자가 저장한 원본
st.session_state['final_text']            # 최종 교정 글

# 워크플로우 상태
st.session_state['show_workflow_modal']   # 모달 팝업 표시 여부
st.session_state['workflow_completed']    # 워크플로우 완료 여부

# 모달 내부 상태 (modal_ 접두사)
st.session_state['modal_draft_after_spell']         # 맞춤법 교정 후 글
st.session_state['modal_spell_check_result']        # 맞춤법 분석 JSON
st.session_state['modal_proceed_to_writing']        # 글쓰기 교정 진행 여부
st.session_state['modal_draft_after_writing']       # 글쓰기 교정 후 글
st.session_state['modal_writing_feedback']          # 글쓰기 피드백
```

---

## 🔍 트러블슈팅

### 문제 1: 모달이 안 열려요
**확인사항**:
- ✅ 원본 글이 저장되었는지 확인
- ✅ "🚀 글 고쳐쓰기 시작" 버튼이 보이는지 확인

### 문제 2: Gemini API 오류
**확인사항**:
- ✅ `.streamlit/secrets.toml` 파일 존재 확인
- ✅ 파일 내 `[gemini]` 섹션과 `api_key` 존재 확인
- ✅ API 키가 유효한지 확인

### 문제 3: 텍스트가 저장 안 됨
**확인사항**:
- ✅ "💾 저장" 버튼을 반드시 클릭했는지 확인
- ✅ 성공 메시지("✅ 저장 완료")가 표시되는지 확인

### 문제 4: "처음으로" 버튼을 눌렀는데 상태가 남아있음
**해결책**:
- 브라우저 새로고침 (Cmd + R 또는 F5)
- Streamlit 앱 재시작

---

## ⚡ 팁 & 트릭

### 1. 빠른 반복 작업
```
1. "✅ 원본 저장"
2. "🚀 글 고쳐쓰기 시작"
3. 모달에서 작업
4. "✅ 완성!"
5. "🔄 처음으로" → 다시 1번으로 돌아감
```

### 2. 오류 목록 활용
- Expander를 클릭해서 각 오류의 세부사항 확인
- 제안된 수정안을 참고해서 직접 편집

### 3. 재검사/재평가 활용
- 텍스트를 편집한 후 반드시 "🔎 다시 검사" 또는 "🔎 다시 평가" 클릭
- 그렇지 않으면 이전 결과가 계속 표시됨

### 4. 최종 비교에서 양쪽 다 확인
- 원본 글과 완성된 글을 병렬로 비교
- 어떤 부분이 변경되었는지 시각적으로 확인

---

## 📚 전체 문서

- **`main_app.py`** - 메인 코드 (271 라인)
- **`MODAL_WORKFLOW_GUIDE.md`** - 상세 가이드
- **`IMPLEMENTATION_SUMMARY.md`** - 구현 요약
- **`QUICK_START.md`** - 이 문서

---

## 🎓 학습 자료

### Streamlit 기능
- `st.dialog()` - 모달 팝업
- `st.session_state` - 상태 관리
- `st.rerun()` - 페이지 새로고침
- `st.download_button()` - 파일 다운로드

### Python 기능
- 딕셔너리 처리 (`dict.get()`)
- 리스트 컴프리헨션
- with 문을 이용한 컨텍스트 관리

---

**Version**: 2.0 (Modal-based)  
**Last Updated**: 2025-11-12 11:18  
**Status**: ✅ 완료 및 테스트 대기 중
